## 基本编辑
- 怎么打开VIM功能
  - 创建 ~/.vimrc
  - 或者在编辑是使用  :set nocompatible
- 插入字符，i在当前光标插入，a插在当前光标后一个位置, I 插入到行首， A 插入到行尾
- h / j / k / l 分别对应  左移/下移/上移/右移
- u 可以撤销上一次操作，Ctrl+R可以撤销上一次撤销
- 保持并退出，可以用 ZZ 命令， ：wq ， ：wq！， ：wq new.txt，：1,10wq new.txt
- dd 删除一行， o 在当前行下方新增一行，O 在当前行上分新增一行
- :help 可以查看帮助文档， ctrl+j / ctrl+t 可以在文档链接跳转
- 命令前加数字可以执行多次命令，如 3dd，删除3行
- w 命令可以在往前移动一个单词，b 命令往后移动，可以前面加数字移动多次，比如 4w 可以往前移动4个单词 
- 0 移动到行首, ^ 移动到首个非空字符, $ 移动到行尾, 5$移动到5行后的行尾
- ‘+’ 命令移动到下一行首 ，- 移动到上一行首 ，—— 移动到当前行首
- fx 往前搜索字符x, ; 命令向前重复搜索，，命令反向重复搜索，Fx 命令往后搜索, tx/Tx停留在x的前一个字符
- nG, 移动到第n行, G移动到最后一行，gg移动到第一行
- H 命令移到当前屏幕第一行，M 移到屏幕中间，L 移到屏幕底部
- CTRL+U上翻半页，CTRL+D下翻半页，CTRL+B上翻一页，CTRL+F下翻一页,CTRL+Y上翻一行，CTRL+E下翻一行,10CTRL+Y上翻10行
- z+回车 命令可以把当前行移到屏幕首，前面加数字可以把指定行移到屏幕首，zt 命令完成相同的功能并保持光标位置不变，zb 命令把当前行移到屏幕尾，zz 命令把当前行移到屏幕中间
- CTRL+G显示状态栏
- dd删除一行，dw删除单词，d$删除到行尾
- c命令和d命令一样，除了删除完了后，会进入insert 模式
- D删除当前位置到行尾，C删除当前位置到行尾并进入insert模式，S删除当前一整行
- x删除右边一个字符，X删除左边一个字符
- . 命令可以重复最近的d或c命令
- J 命令可以合并当前行和下一行，插入一个space，gJ和J命令一样，但是不插入space
- rx替换当前的字符为x， R 进入 replace模式，在该模式下输入的字符会替换掉当前光标下的字符，直到输入ESC退出
- ~ 大小写替换
- q{c} 开始录制，到下一个 q 结束, @{c} 重复录制的操作
## 搜索
- /string, 用来搜索字符串，/+UP或/+DOWN可以上下翻搜索的历史记录，n 向前重复搜索，N 向后重复搜索，? 反向搜索
- :set hlsearch 设置高亮显示搜索结果，:set nohlsearch，取消高亮搜索显示，:nohlsearch 取消当前高亮
- :set incsearch 设置搜索为增量搜索，意思就是每输入一个字符就为显示当前搜索结果，不用等按回车键再执行搜索，:set noincsearch 取消该设置
- ^string, 搜索string并string在行首，string$，搜索string并string在行尾，^string$，搜索一行只有string的行，^$搜索空行， . 可以匹配任意一个字符， 如 /the.abc 可以匹配theAabc，theBabc, the1abc
- \可以取消特殊字符，例如，要搜索"the."， 命令是 /the\\.   
- :set ignorecase 搜索时忽略大小写，:set noignorecase 不忽略大小写
- 同时设置 :set ignorecase   :set smartcase， 那么输入都是小写时会忽略大小写，如果输入的搜索字符串至少有一个大写字符则不忽略大小写
- 默认搜索从当前光标开始，如果搜索到文件尾还没有，会回到文件首再开始搜索，:set nowrapscan 使得搜索到文件尾还没匹配时停止搜索，:set wrapscan 恢复
- \* 可以立刻执行搜索当前光标所在的词，# 是反向搜索，\* 是精确匹配，如当前光标下是const，那么constant不会被搜索到，如果想要模糊匹配，可以用 g* 命令， g# 是方向搜索的命令
- /const/2 搜索下一个匹配的const并下移2行，/const/-2 搜索并上移2行
- /const/b2 搜索并光标向右移动2个字符，/const/b-2 搜索并光标向左移动2个字符
- /const/e 搜索并将光标置于词尾，/const/e2搜索并将光标从词尾开始右移2个字符，/const/e-2搜索并将光标从词尾向左移2个字符
- /const/e+2, / (重复搜索，使用相同的偏移量)， //5 (重复搜索，偏移量变成5)，// (重复搜索，偏移量变为0)
- \\<string 可以匹配以string为开头的词，string\\> 匹配以string为结尾的词，\\<string\\> 可以精确匹配为string的词
- \* 匹配前面的字符0次或多次，如te\* 可以匹配 t,te,tee,teee... , \\+ 可以匹配1次或多次，te\\+ 可以匹配 te，tee，但不能匹配 t ， \\= 可以匹配0次或1次
- \\a 匹配任意字符， \\d 匹配任意数字， 比如 /\\a\\a\\a_ 可以匹配以_结尾的三个字符
- 范围匹配可以用 [ ] 指示， 如 n[aeiou]u ， 可以匹配 nau，neu，niu，nou，nuu，又如 n[0-9A-Z]等，n[^aeiou]，^表示匹配不在[]里出现的字符，对于特殊字符，需要加\，如n[\$^],  /a\$b，可以匹配 a$b
- [:upper:] 匹配大写字符，[:lower:] 匹配小写字符，所以 [[:upper:][:lower:]] 可以匹配任意大写或小写的字符
- a\\{min, max}， 匹配 min ~ max个a字符，如 a\\{3,5}, min 可以省略，默认值是0， max可以省略，默认值是无穷大 ，如 a\\{,5}, a\\{3,}, 如果只提供一个值，表示精确匹配，如 a\\{3}表示匹配3个a， 加 - 前缀可以表示尽量少的匹配，如 a\\{-3,5}, a\\{-,5}, a\\{-3,}, a\\{-}
- \\( 和 \\)可以指定一个group， 如 a\\(XY\\)\*b 可以匹配 ab, aXYb, aXYXYb, 第一个group 可以用 \\1表示，第二个是\\2，以此类推，如要搜索 the the， 可以是  \\(the\\) \\1
- \\| 可以按or匹配，如 foo\\|bar可以匹配foo或者bar
## 文本块和多文件
- 我们用d和x命令删除的内容，会被保存起来，用 p 命令可以 paste 出来 ,  p 命令在当前光标后一个字符开始paste , P 命令在当前光标前 paste , 前面加 count可以 paste 多次, gp/gP 命令可以在 paste 之后光标放在paste的文本最后
- vim可以用 a ~ z 做 mark 标记，如 ma， ‘a 表示移动到 a 标记的地方的行首，`a表示移动到a标记的地方（标记时光标的位置），我们用 ma, d'a 命令可以删除一整块内容 , :marks 命令可以看到所有mark标记
-一些特殊的mark标记，如‘表示上次光标的位置，所以‘’可以回到上次位置，[上次插入文本的第一行,]上次插入文本的最后一行
- vim可以用 y 命令执行 copy 操作，不同于 d 命令，y 操作不会删除，但其它功能基本一样，如 yy 表示 copy 当前行，y$是copy到行尾，ma和y‘a的命令组合可以copy文本块，Y命令可以copy一行，前面加count可以copy多行
- !\<command\> 可以执行一些系统命令并更新或写入到当前文件，如 !10Gsort 可以把当前行到第10行排序, !!命令可以对当前行操作，如 !!ls 可以把当前目录的ls结果插入到当前行  , !!date 可以插入日期到当前 行
- 在当前文件打开另一个文件用 : vi file 命令, 如果当前文件有修改未保存 , 可以用 : write 保存，或者用  ：vi! file 放弃当前文件的修改 , : view file 可以以只读的方式打开另一个文件
- vim可以同时打开多个文件，如 vim  one.c two.c three.c , 在文件间跳转可以用 : next 和 : previous  , 如果当前文件有修改未保存，则 : wnext 和 : wprevious 命令可以保存并跳转 , : next! 和 : previous!可以放弃保存并跳转 , : first 和 : last 命令可以跳转到第一个文件和最后一个文件, : args 命令可以查看当前打开的所有文件，并且当前编辑的文件用[]显示
- : set autowrite 可以设置自动保存 , : set noautowrite 取消 
- 假如你当前在编辑一个文件，然后跳转到第二个文件 , CTRL+^ 命令可以在这两个文件间跳转
- Multiple Register, yy/p 可以执行copy/paste，使用的是unamed register，也可以具体指定register，如“ayy执行copy当前行到register a，然后执行”ap可以paste register a的内容，也可以“byy/”bp ,  : registers 可以查看register内容
- 添加文本，“ayy拷贝一行到register a，并替换原来register a的内容，如果想追加内容，可以用“Ayy，如“ayy拷贝第一行，”Ayy拷贝第二行，那么“ap可以paste第一和第二行
- 有一些特殊的register，如  _ , =, \* 等
- vim \`grep -l 'frame_counter' *.c\` 这条命令可以打开所有包含 frame_counter 的 c文件, :arg \`grep -l 'frame_counter' *.c\` 可以实现类似功能, :args 可以查看所有编辑的文件, :argument i可以查看第 i 个文件(和 :buffers, :buffer i有点类似)
- vim支持 +cmd 功能，如 vim +97 a.cc 打开a.cc文件并光标停留在第97行 ， vim +/#include a.cc并执行搜索功能，光标停留在第一个#include上，在其它命令如 :next +cmd 也可以
- 小写的mark a～z作用域在当前文件，如 one.c two.c都可以设置ma，执行‘a，相互不会有干扰，如果是大写的mark A~Z，作用域是全局的，如在one.c设置了mA，然后打开了two.c，执行’A，则会跳转到one.c
- 在insert mode下，也可以执行一些命令，CTRL+U（删除一行），CTRL+W（删除光标前的一个词），CTRL+Left/Right（想左或右移动一个词），Home/End（移动到行首或行尾），CTRL+Home/End（移动到文件首或尾），CTRL+A（插入上次insert mode时输入的内容），CTRL+Y（输入当前光标上面的字符），CTRL+R\<register\>（插入register的内容，和”ap类似
- : set wrap 可以打开wrap功能  ,  : set nowrap 关闭，在nowrap的情况下，一行特别长的话，会跑出屏幕外，g^/g0/g$/gm可以移动到当前屏幕的行首行尾行中间等（不同于0/^/$等是针对行，不管行有多长，哪怕抛出屏幕，也会移到相应的行首行尾），在wrap开启的情况下，如果一行太长，会自动分行显示，gj/gk可以移动到屏幕上一行下一行（不同于j/k，移动到上一行下一行，如果一行很长被分成了3行，实际移动的是当前屏幕的3行），在nowrap的情况下，一行太长的话会让屏幕跑出去[count]zh/zl可以让屏幕左右移动[count]个字符，zL/zR可以左右移动半个屏幕，除了 : set wrap 还有 : set linebreak 命令
## 多窗口
- 命令  : split 可以把窗口分割 ，CTRL+Ww命令可以切换窗口，CTRL+Wj/Wk可以上下切换窗口，要关闭一个窗口，可以用zz或 :q 命令 ，split后不跟文件名，默认分割出当前文件，也可以带文件名打开其他文件，如当前在one.c ，:split two.c可以让one.c/two.c同时显示出来，也可以跟+commond命令，如 split +/include two.c，可以打开two.c并搜索include，split前加数字可以控制新打开窗口的size，如 :10 split two.c, 那么新打开的two.c窗口只有10行高度
- CTRL+Wt（切换到top窗口），CTRL_Wb（切换到buttom窗口），CTRL+Wp（切换到上一次窗口），CTRL+Ww（切换到下一个窗口），CTRL+WW（切换到上一个窗口），CTRL+Wr（向下旋转窗口），CTRL+WR（向上旋转窗口），CTRL+Wx（和下一个窗口交换窗口
- 命令:wall可以针对所有窗口执行write操作，类似的命令有 :qall（退出所有窗口  ），:qall！，:wqall
- 命令CTRL+Wo可以关闭所有窗口，只保留当前窗口，:all可以把所有文件以多窗口方式打开
- CTRL+W&CTRL+I命令 可以split窗口并搜索光标下面的词，搜索可以包含#include的文件
- :new可以打开新窗口编辑新文件，:sview是 :split/:view，可以以只读方式打开新窗口
- countCTRL+W+/countCTRL+W-,可以改名窗口大小，CTRL+W=可以让所有窗口大小相等，countCTRL+W_可以让当前窗口count行高，如果没带count，可以让当前窗口变成最大size
- 命令:buffers可以查看buffer，:buffer number可以查看第几个buffer，:buffer file可以打开文件名为file的buffer，:sbuffer file可以分窗口打开，还有命令 :bnext / :bprevious / :bfirst / :blast / :sbnext / :sbprevious / :sblast / :sbfirst等 
- 用 :buffers看buffer，有一列状态栏，-表示inactive，h表示hidden的buffer，%表示active也就是当前编辑的buffer，#表示alternative buffer，+表示modified的buffer，:hide命令可以hidden当前buffer，关闭一个文件时，buffer默认会变成inactive，:set hidden命令可以让关闭文件动作使得buffer变成hidden而不是inactive
- 命令 : set switchbuf=useopen , 当当前buffer已经在窗口中打开时，不会打开新窗口，而是重用当前已打开的窗口
## Visual Mode
- 有三种Visual Mode，v是从字符到字符的高亮显示，V是行到行的高亮显示，CTRL+V是矩形高亮显示（可以显示一部分列），模式之前的切换只要按下新的模式命令即可，如当前是v模式，想要切换到矩形高亮显示，只要按CTRL+V即可，ESC键可以推出Visual Mode，或者重复按当前模式，比如当前在v模式，再按一次v退出
- gv可以重复上次visual block的selection，在visual mode下，光标移动的命令都可以用，如$/0/w等, ~可以切换大小写，U可以全部变成大写，u全部变成小写
- d可以删除高亮显示部分，D可以删除高亮显示的行（即使改行只有部分高亮），y可以copy高亮部分，Y可以copy高亮显示的行，还有c/C命令也可以执行delete之后进入insert mode, yank操作也可以使用register，如“ad会把block块删除并copy到register a，”ap可以paste出来，“ay/”ap类似，只是不删除block，只copy，“aY/”ap针对高亮显示的整行操作
- J命令可以把所有高亮显示的行合并成一行，用空格分隔，gJ合并但是没有空格分隔
- 对于高亮显示的行，可以用 > 和 < 进行向左或向右缩进，缩进大小可以用shiftwidth选项调整，=命令可以indent文本，CTRL+]可以跳转到函数定义的地方
- K命令可以针对高亮显示的词查询man手册，如当前词是netstat，按下K可以查出netstat的帮助文档
- Visual Block Mode(按下CTRL+V）下的文本修改，会对所有行都生效，如按I可以插入文本到底一行，然后按ESC，所有行都会自动插入第一行的文本，按下c命令可以删除高亮显示的文本并进入insert mode，在第一行插入新文本之后按ESC可以在所有行都插入新文本，按下C命令删除到行尾而不是仅高亮显示部分，A命令可以在高亮block之后插入文本，如果想在高亮文本的行尾插入文本，可以按CTRL+V$A\<TEXT\>, rx命令可以把高亮显示block都替换成字符x
